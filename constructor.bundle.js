(()=>{"use strict";const e=document.querySelector(".burger"),t=document.querySelector(".navbar__list"),a=[...document.querySelectorAll(".nav__link")];function s(){document.body.style.overflow="auto",document.body.style.userSelect="auto"}const n=["1 percent milk","95 percent lean ground beef","allspice","almond extract","almond meal","almond milk","almonds","apple","applesauce","applewood smoked bacon","artificial vanilla","asiago cheese","asparagus","avocado","baby spinach","bakers white chocolate","baking mix","baking powder","baking soda","balsamic vinegar","banana","bay leaves","beef","beef bouillon cube","beef broth","beef gravy","bell pepper","berries","black bean sauce","black beans","black pepper","blueberries","boneless beef short ribs","boneless skinless chicken breast","boneless turkey breast","bran","breadcrumbs","broccoli","broccoli florets","butter","buttermilk","butterscotch chips","butterscotch pudding","cabbage","cacao powder","canadian bacon","candied ginger","candied orange peel","candy coated chocolate pieces","candy corn","canned black beans","canned blackeyed peas","canned butter beans","canned diced tomatoes","canned kidney beans","canned pinto beans","canned pumpkin","canned tomato sauce","canned tomatoes","canned white beans","caramel sauce","caraway seeds","carrot","cauliflower","celery","celery salt","celery seed","celery sticks","cheddar cheese","cheese","cherries","cherry tomato","chia seeds","chicken breast","chicken broth","chicken sausage","chicken stock","chicken wings","chili pepper","chili powder","chives","chocolate crumb crust","chocolate hazelnut spread","cilantro","cinnamon","coarse salt","coarse sea salt","cocoa nibs","coconut","coconut flour","coconut milk","coconut oil","condensed cream of chicken soup","condensed cream of mushroom soup","cooked bacon","cooked chicken breast","cooked quinoa","cooked rice","cooked rolled oats","cooking oil","corn","corn kernels","corn starch","corn syrup","corn tortilla chips","cornmeal","cottage cheese","cream","cream cheese","cream of tartar","creamy peanut butter","creole mustard","crimini mushrooms","crushed tomatoes","cumin","dark brown sugar","dark chocolate","dark chocolate bar","dark sesame oil","diced ham","diced tomatoes with green chilies","dill","distilled white vinegar","dried arbol chile","dried basil","dried parsley","dried strawberries","dried thyme","dry yeast","egg","egg noodles","egg whites","egg yolk","elbow macaroni","english muffin","evaporated milk","extra firm tofu","extra virgin olive oil","fat free greek yogurt","fat free milk","feta cheese","filo pastry","finely crushed pretzels","fire roasted tomatoes","flour tortilla","fontina cheese","freeze dried strawberries","fresh basil","fresh mushrooms","garlic","garlic powder","gelatin","ginger","ginger powder","gluten free chocolate sandwich cookies","goat cheese","golden brown sugar","gorgonzola","gouda","graham cracker crumbs","graham crackers","grape tomato","greek yogurt","green beans","green chili pepper","green enchilada sauce","green pepper","green tea bag","ground cayenne pepper","ground chuck","ground cinnamon","ground clove","ground coriander","ground flaxseed","ground pork sausage","gruyere","half and half","ham","harissa","havarti","hemp milk","hersheys kisses brand milk chocolates","hollandaise sauce","hollandaise sauce mix","honey","hot sauce","ice","icing","imitation crab","instant coffee","instant potatoes flakes","instant vanilla pudding mix","italian sausage","italian seasoning","italian tomato","jalapeno pepper","kosher salt","lasagne noodles","lean bacon","leek","lemon","lemon juice","lemon peel","light olive oil","lime","lime juice","lime peel","long grain rice","low sodium baking powder","low sodium chicken broth","lower sodium soy sauce","lump crabmeat","macadamia nuts","maple extract","maple flavoring","maple syrup","marinated artichokes","mayonnaise","medjool dates","mesclun","milk","milk chocolate","mini chocolate chips","mini peppers","mint","miso","molasses","monterey jack cheese","mozzarella","mustard powder","nutmeg","oat bran","olive oil","onion","onion powder","orange juice","orange zest","oregano","oreo cookies","orzo","palm sugar","pancetta","panko","parmesan","parsley","peanut butter","peas and carrots","pecans","pecorino romano","peppermint extract","pepperoni","peppers","persian cucumber","petite peas","pickled jalapenos","pine nuts","pineapple juice","pinto beans","pistachio nuts","pizza dough","plain greek yogurt","plain yogurt","poppy seeds","pork ribs","pork sausage","portobello mushrooms","potato","powdered sugar","provolone","puff pastry dough","pumpkin pie spice","quark","quick cooking oats","quinoa","raisins","ranch dressing","red onion","red pepper","red pepper flakes","reduced fat cream cheese","refried beans","refrigerated crescent rolls","refrigerated pie crust","rice","ricotta cheese","roasted red peppers","rolled oats","romanesco","root vegetable","russet potato","sage","salami","salt and pepper","salted butter","sausage","savoy cabbage","scotch whiskey","seafood seasoning","semisweet chocolate","semisweet chocolate chips","serrano pepper","shallot","sharp cheddar cheese","sherry","shortcrust pastry","shortening","shredded cheddar cheese","shredded cheese","shredded mozzarella","silken tofu","smoked paprika","sour cream","soy buttery spread","soymilk","spanish chorizo","sparkling water","spinach","spinach fettuccine","spring onions","sriracha","strawberries","sub bun","sugar","sun dried tomatoes","sunflower seeds","sweet potato","sweetened condensed milk","swiss chard","swiss cheese","table salt","table syrup","tapioca starch","tarragon","tea","thin baguette","thyme","tomato","tomato juice","tomato paste","turbinado sugar","unbleached all purpose flour","unbleached flour","unsalted butter","unsweetened coconut","unsweetened shredded coconut","vanilla extract","vanilla paste","vanilla powder","vanilla yogurt","vegetable stock","walnuts","water","wheat flour","whipped topping","whipping cream","white bread","white chocolate chips","white onion","white pepper","white potato","white whole wheat flour","white wine vinegar","whole chicken","whole kernel corn","whole turkey","whole wheat flour","whole wheat pastry flour","worcestershire sauce","yellow onion","yogurt","yukon gold potato","zucchini"];function r(e){window.localStorage.userName=e,document.querySelector("#user-name").textContent=e}const o=e=>{e.target instanceof HTMLElement&&!e.target?.closest(".popup__content")&&e.target.closest(".popup")?.classList.remove("is-open")},c=function(e,...t){const a=document.createElement(e);return a.classList.add(...t),a},i="https://rs-recipes-server.herokuapp.com";function l(e){window.localStorage.setItem("user",JSON.stringify(e))}async function d(e){e.preventDefault();const t=e.target,a=function(e){if(e.password.value===e["password-confirm"].value)return e.querySelector("#password-mismatch").classList.add("hidden"),e.querySelector("#user-exist").classList.add("hidden"),new FormData(e);e.querySelector("#password-mismatch").classList.remove("hidden")}(e.target);if(void 0!==a){const e=await p(a,"/user/register");if(400===e.status)t.querySelector("#user-exist").classList.remove("hidden");else{document.querySelector(".popup").classList.remove("is-open"),alert("Registered successfully!"),localStorage.setItem("token","true"),t.reset();const a=await e.json();l(a),r(a.name)}}}async function u(e){e.preventDefault();const t=e.target,a=(s=e.target,new FormData(s));var s;const n=await p(a,"/user/login");switch(n.status){case 401:t.querySelector("#wrong-password").classList.remove("hidden"),t.querySelector("#user-not-found").classList.add("hidden");break;case 404:case 500:t.querySelector("#user-not-found").classList.remove("hidden"),t.querySelector("#wrong-password").classList.add("hidden");break;case 200:{document.querySelector(".popup").classList.remove("is-open"),alert("Logged in successfully!"),localStorage.setItem("token","true"),t.reset();const e=await n.json();l(e),r(e.name)}}}async function p(e,t){return await fetch(`${i}${t}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Object.fromEntries(e.entries()))})}const m=async e=>{let t="";e&&0!==Object.keys(e).length&&(t=(e=>{const t=[];for(const[a,s]of Object.entries(e))switch(typeof a){case"string":case"number":case"boolean":t.push(`${a}=${s}`);break;case"object":t.push(`${a}=${s.join(",")}`)}return"?"+t.join("&")})(e));const a=await fetch(`${i}/recipes/${t}`);return await a.json()},g=function(e,t,a){return e?[!!e[t].saved.find((e=>e===a)),!!e[t].favorite.find((e=>e===a))]:[!1,!1]};function h(e,t,a,s,n){a.classList.contains("is-active")?e[s][n].push(t.id):e[s][n]=e[s][n].filter((e=>e!==t.id)),async function(e,t){await fetch(`${i}/user/update`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)})}(e),localStorage.setItem("user",JSON.stringify(e))}const b={containerClass:"relevant",listClass:"recipes__list",listElemType:"div",cardClassList:["recipe__item"],queryOptions:{page:0,limit:10,sort:"rating","sort-dir":-1},largeCardIndex:-1},y=document.getElementById("constructor-input"),f=document.querySelector(".ingredient-options"),v=document.getElementById("relevant-options"),k=document.getElementById("chosen-ingredients"),w=document.getElementById("is-empty-message"),_=document.getElementById("add-from-list"),L=document.getElementById("constructor-search"),S=document.getElementById("relevant"),E=document.getElementById("lack-1"),q=document.getElementById("lack-2"),$=document.getElementById("lack-3"),I=document.getElementById("failure");function x(e){v.innerHTML="",e.forEach((e=>{const t=c("li","ingredient-options__item");t.id=e,t.innerText=e,v.append(t)}))}function j(e,t){const a=t.findIndex((t=>t===e.toLowerCase())),s=-1===a?0:1;t.splice(a,s)}function C(e,t,a){const s=e.trim().toLowerCase();var r,o;n.includes(s)&&(function(e){const t=c("div","constructor-ingredients__item","constructor-ingredient");t.innerHTML=`\n    <span class="constructor-ingredient__name">${e}</span>\n    <div class="constructor-ingredient__delete"></div>\n  `,k.append(t)}(s),r=s,o=a,n.includes(r)&&!o.includes(r)&&(o.push(r),o.sort()),O()),j(s,t),y.value="",x(t),y.focus()}function T(){w.classList.remove("hidden")}function O(){w.classList.add("hidden")}function z(e,t){t?e.classList.remove("hidden"):e.classList.add("hidden")}const B=n;document.getElementById("is-empty-message").innerText="You haven't added anything yet...",e.addEventListener("click",(()=>{e.classList.toggle("burger_open"),t.classList.toggle("navbar__list_open"),e.classList.contains("burger_open")?(document.body.style.overflow="hidden",document.body.style.userSelect="none"):s()})),a.forEach((a=>{a.addEventListener("click",(()=>{e.classList.remove("burger_open"),t.classList.remove("navbar__list_open"),s()}))})),T(),document.querySelector("#user-name").textContent=window.localStorage.userName||"User",document.querySelector(".popup__body")?.addEventListener("click",o),(e=>{const t=document.getElementById(e).querySelectorAll(".tabs-nav__item"),a=document.getElementById(e).querySelectorAll(".tabs-content__item");let s="";t.forEach((e=>e.addEventListener("click",(e=>n(e)))));const n=e=>{e.preventDefault(),t.forEach((e=>e.classList.remove("is-active")));const n=e.target.classList.contains("tabs-nav__item")?e.target:e.target.closest(".tabs-nav__item");var r;n?.classList.add("is-active"),a.forEach((e=>e.classList.remove("is-active"))),s=n?.getAttribute("data-tab-name"),r=s,a.forEach((e=>{e.getAttribute("data-tab-content")===r?e.classList.add("is-active"):e.classList.remove("is-active")}))}})("forms-container"),function(e,t){!function(){const e=document.querySelector(".profile-btn"),t=document.querySelector(".popup");e.addEventListener("click",(async()=>{if(localStorage.getItem("token")){const e=await fetch(`${i}/user/profile`,{credentials:"include"});200===e.status?(l(await e.json()),window.open("./user-page.html","_self")):t.classList.add("is-open")}else t.classList.add("is-open")}))}(),document.forms[1].addEventListener("submit",d),document.forms[0].addEventListener("submit",u),k.addEventListener("click",(a=>{if(a.target.classList.contains("constructor-ingredient__delete")){const n=a.target.closest(".constructor-ingredient"),r=n.querySelector(".constructor-ingredient__name").innerHTML;n&&(s=n,k.removeChild(s),j(r,t),function(e,t){const a=e.querySelector(".constructor-ingredient__name").innerText;t.push(a),t.sort()}(n,e))}var s;0===k.querySelectorAll(".constructor-ingredient").length?T():O()})),y.addEventListener("click",(()=>{x(e),f.classList.add("is-active")})),y.addEventListener("input",(()=>{f.classList.add("is-active");const t=(a=e,s=y.value.trim().toLocaleLowerCase(),a.filter((e=>e.includes(s))));var a,s;t.length?x(t):("Sorry, nothing matches",v.innerText="Sorry, nothing matches")})),document.body.addEventListener("click",(e=>{const t=e.target;t.classList.contains("ingredient-options__item")||"constructor-input"===t.id||f.classList.remove("is-active")})),y.addEventListener("keypress",(a=>{"Enter"===a.key&&C(y.value,e,t)})),v.addEventListener("click",(a=>{const s=a.target;s.classList.contains("ingredient-options__item")&&C(s.innerText,e,t)})),_.addEventListener("click",(()=>function(e,t){const a=JSON.parse(localStorage.getItem("user")||"null"),s=t;a&&a.products.own.forEach((a=>{s.includes(a)||C(a,e,t)}))}(e,t))),L.addEventListener("click",(()=>async function(e){e.length>0&&(b.queryOptions.ingredientsAll=e.slice(),await async function(e){const t=await async function(e,t){return await t(e.queryOptions)}(e,m);t.length>0?(z(S,!0),z(I,!1),function(e,t,a){const s=document.querySelector(`.${t.containerClass}`).querySelector(`.${t.listClass}`),n=function(e,t,a){return e.map(((e,s)=>"largeCardIndex"in t?function(e,t,a,s,n){const r=e.dishTypes[0].split(" ").map((e=>e[0].toUpperCase()+e.slice(1))).join(" ")||"",o=Math.round(e.nutrition.nutrients[0].amount),i=String(e.id),l=`./recipe.html?id=${i}`,[d,u]=g(n,"recipes",i),p="normal"===t?a.concat("card"):a.concat(["card","card_lg"]),m=c(s,...p);return m.id=i,m.innerHTML=`\n    <div class="card__header">\n      <p class="card__dish">${r}</p>\n      <div class="recipe__btns">\n        <button class="save-recipe btn-reset save-btn"></button>\n        <button class="favorite-recipe btn-reset favorite-btn"></button>\n      </div>\n    </div>\n    <a class="card__img" href="${l}">\n      <img class="card__img" src=${e.image} alt=${e.title}>\n    </a>\n    <a class="card-anchor" href=${l}>\n      <div class="card__meta">\n        <div class="data__time">\n          <p class="time__title">Cook time</p>\n          <p class="time__info">${e.readyInMinutes} min</p>\n        </div>\n        <div class="data__calories">\n          <p class="calories__title">Calories</p>\n          <p class="calories__info">${o} kcal</p>\n        </div>\n        <div class="data__rating">\n          <p class="rating__title">Rating</p>\n          <p class="rating__info">${e.aggregateLikes}</p>\n        </div>\n      </div>\n      <div class="card__body">\n        <h3 class="card__title">${e.title}</h3>\n        <p class="card__text">${e.summary}</p>\n      </div>\n    </a>\n  `,d&&m.querySelector(".save-recipe").classList.add("is-active"),u&&m.querySelector(".favorite-recipe").classList.add("is-active"),m}(e,s===t.largeCardIndex?"large":"normal",t.cardClassList,t.listElemType,a):function(e,t,a){const s=new Date(e.postedAt).toLocaleDateString("en-us",{year:"numeric",month:"long",day:"numeric"}),n=String(e._id),r=`./article.html?id=${n}`,[o,i]=g(a,"articles",n),l=c("article",...t);return l.id=e._id,l.innerHTML=`\n    <img class="article__img" src=${e.image} alt="article preview">\n    <div class="article__content">\n      <div class="article__header">\n        <time class="article__date" datetime=${e.postedAt}>${s}</time>\n        <div class="article__btns">\n          <button class="save-article btn-reset save-btn"></button>\n          <button class="favorite-article btn-reset favorite-btn"></button>\n        </div>\n      </div>\n      <h3 class="article__title">${e.title}</h3>\n      <p class="article__summary">${e.summary}</p>\n      <a class="article__btn btn-reset" href=${r}>contunue reading</a>\n    </div>\n  `,o&&l.querySelector(".save-article").classList.add("is-active"),i&&l.querySelector(".favorite-article").classList.add("is-active"),l}(e,t.articleClassList,a)))}(e,t,a);s.innerHTML="",s.append(...n)}(t,e,JSON.parse(localStorage.getItem("user")||"null")),document.querySelectorAll(".card").forEach((e=>{!function(e,t){const a=e.querySelector(".save-btn"),s=e.querySelector(".favorite-btn");a.addEventListener("click",(a=>{const s=a.target;s.classList.toggle("is-active");const n=JSON.parse(localStorage.getItem("user")||"null");n&&h(n,e,s,t,"saved")})),s.addEventListener("click",(a=>{const s=a.target;s.classList.toggle("is-active");const n=JSON.parse(localStorage.getItem("user")||"null");n&&h(n,e,s,t,"favorite")}))}(e,"recipes")}))):(z(S,!1),z(E,!1),z(q,!1),z($,!1),z(I,!0))}(b))}(t)))}(B,[]),x(n)})();
//# sourceMappingURL=constructor.bundle.js.map
{"version":3,"file":"article.bundle.js","mappings":"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","sources":["webpack://my-webpack-project/./src/features/burgerMenu.ts","webpack://my-webpack-project/./src/config/api.config.js","webpack://my-webpack-project/./src/helpers/createElementWithClass.ts","webpack://my-webpack-project/./src/helpers/checkItemInUserLists.ts","webpack://my-webpack-project/./src/pages/recipe/render.ts","webpack://my-webpack-project/./src/features/cardButtonsHandler.ts","webpack://my-webpack-project/./src/api/userService.ts","webpack://my-webpack-project/./src/helpers/manageUserName.ts","webpack://my-webpack-project/./src/helpers/loginFormHandlers.ts","webpack://my-webpack-project/./src/pages/article/controller.ts","webpack://my-webpack-project/./src/helpers/getCookieValue.ts","webpack://my-webpack-project/./src/pages/article/index.ts","webpack://my-webpack-project/./src/api/articlesService.ts","webpack://my-webpack-project/./src/pages/article/render.ts","webpack://my-webpack-project/./src/features/renderCards.ts","webpack://my-webpack-project/./src/helpers/capitalize.ts","webpack://my-webpack-project/./src/api/recipesService.ts"],"sourcesContent":["const burgerBtn = document.querySelector('.burger') as HTMLElement;\nconst menu = document.querySelector('.navbar__list') as HTMLElement;\nconst menuLinks = [...document.querySelectorAll('.nav__link')] as HTMLElement[];\n\nexport const burgerMenu = () => {\n  burgerBtn.addEventListener('click', () => {\n    burgerBtn.classList.toggle('burger_open');\n    menu.classList.toggle('navbar__list_open');\n  });\n\n  menuLinks.forEach((el: HTMLElement) => {\n    el.addEventListener('click', () => {\n      burgerBtn.classList.remove('burger_open');\n      menu.classList.remove('navbar__list_open');\n    });\n  });\n};\n","const BASE_URL = 'https://rs-recipes-server.herokuapp.com';\n\nconst ENDPOINTS = {\n  recipes: '/recipes',\n  recipesDistinctProps: '/recipes/distinct',\n  articles: '/articles',\n  userRegister: '/user/register',\n  userLogin: '/user/login',\n  userLogout: '/user/logout',\n  userProfile: '/user/profile',\n  userUpdate: '/user/update',\n};\n\nexport { BASE_URL, ENDPOINTS };\n","function createElemWithClass(tagName: string, ...classNames: string[]): HTMLElement {\n  const createdElement = document.createElement(tagName);\n  createdElement.classList.add(...classNames);\n\n  return createdElement;\n}\n\nexport default createElemWithClass;\n","import { IUserResponse } from '../types';\n\nfunction checkItemInUserLists(userObject: IUserResponse | null, listName: 'recipes' | 'articles', itemId: string) {\n  if (!userObject) return [false, false];\n\n  const isInSavedList = userObject[listName].saved.find(id => id === itemId);\n  const isInFavoritesList = userObject[listName].favorite.find(id => id === itemId);\n\n  return [!!isInSavedList, !!isInFavoritesList];\n}\n\nexport default checkItemInUserLists;\n","import { ILoadRecipePage, IIngredientMeta, INutrient, IUserResponse } from '../../types';\nimport createElementWithClass from '../../helpers/createElementWithClass';\nimport infoSvg from '../../assets/svg/info-circle.svg';\nimport round from '../../helpers/round';\nimport checkItemInUserLists from '../../helpers/checkItemInUserLists';\n\nconst PRICE_COEFFICIENT = 100;\n\nfunction renderRecipe(recipeData: ILoadRecipePage, equipmentList: string[] | undefined) {\n  const main = document.querySelector('#main') as HTMLElement;\n  const recipeContainer = createElementWithClass('section', 'recipe');\n\n  const list = renderIngredientsList(recipeData.extendedIngredients);\n  const nutrients = renderNutrients(recipeData.nutrition.nutrients);\n  const categories = renderList(recipeData.diets, 'category__item');\n  const equipment = renderList(equipmentList, 'equipment__item');\n  const servingCost = (recipeData.pricePerServing / PRICE_COEFFICIENT).toFixed(2);\n\n  recipeContainer.innerHTML = `\n    <div class=\"container\">\n      <h1 class=\"recipe__title\">${recipeData.title}</h1>\n      <div class=\"recipe__content\">\n        <div class=\"recipe__consist\">\n          <div class=\"recipe__ingredients\">\n            <div class=\"ingredients__header\">\n              <h3 class=\"ingredients__title\">Ingredients</h3>\n              <button class=\"ingredients__btn btn-reset\" id=\"less-ingredients\">-</button>\n              <span class=\"ingredients__amount\">${recipeData.servings}</span>\n              <button class=\"ingredients__btn btn-reset\" id=\"more-ingredients\">+</button>\n            </div>\n            <ul class=\"ingredients__list list-reset\">\n              ${list.innerHTML}\n            </ul>\n            <button class=\"btn-active btn-reset\">Add to my shopping list</button>\n          </div>\n          ${nutrients}\n        </div>\n        <div class=\"recipe__descr\">\n          <img class=\"recipe__img\" src=${recipeData.image} alt=${recipeData.title}>\n          <div class=\"recipe__info\">\n            <img class=\"info-icon\" src=${infoSvg} alt=\"\">\n            <div class=\"info__main\">\n              <ul class=\"info__numbers list-reset\">\n                <li class=\"number__item\">Cooking time:&nbsp; <span class=\"number_time\">\n                  ${recipeData.readyInMinutes} min</span>\n                </li>\n                <li class=\"number__item\">Servings:&nbsp; <span class=\"number_servings\">\n                  ${recipeData.servings}</span>\n                </li>\n                <li class=\"number__item\">Price per serving:&nbsp; <span class=\"number_price\">$\n                  ${servingCost}\n                </span></li>\n                <li class=\"number__item\">Health score:&nbsp; <span class=\"number_health\">\n                  ${recipeData.healthScore}\n                </span></li>\n              </ul>\n              <ul class=\"info__categories list-reset\">\n                ${categories?.innerHTML}\n              </ul>\n            </div>\n            <div class=\"info__equipment\">\n              <span class=\"equipment__text\">Equipment:</span>\n              <ul class=\"equipment__list list-reset\">\n                ${equipment?.innerHTML || 'No equipment'}\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `;\n\n  main.appendChild(recipeContainer);\n}\n\nfunction renderInstructions(instructions: string[], recipeId: string, userObject: IUserResponse) {\n  const main = document.querySelector('#main') as HTMLElement;\n  const instructionsContainer = createElementWithClass('section', 'instruction');\n\n  const [isInSavedList, isInFavoritesList] = checkItemInUserLists(userObject, 'recipes', recipeId);\n\n  const instructionsList = renderList(instructions, 'instruction__item');\n\n  instructionsContainer.innerHTML = `\n    <div class=\"container recipe-container\" id=${recipeId}>\n      <h3 class=\"instruction__title\">Instructions</h3>\n      <ol class=\"instruction__list\">\n        ${instructionsList?.innerHTML}\n      </ol>\n      <div class=\"instruction__btns\">\n        <button class=\"instruction__btn_favorite btn-active btn-reset favorite-btn\">Add to favorite recipes</button>\n        <button class=\"instruction__btn_save btn-active btn-reset save-btn\">Save for later</button>\n      </div>\n    </div>\n  `;\n\n  if (isInSavedList) {\n    (instructionsContainer.querySelector('.instruction__btn_save') as HTMLButtonElement).classList.add('is-active');\n  }\n  if (isInFavoritesList) {\n    (instructionsContainer.querySelector('.instruction__btn_favorite') as HTMLButtonElement).classList.add('is-active');\n  }\n\n  main.appendChild(instructionsContainer);\n}\n\nfunction renderIngredientsList(ingredientsList: IIngredientMeta[]): HTMLElement {\n  const instructionsList = document.createElement('div');\n\n  const ingredients = ingredientsList.map((indredient, index) => {\n    const listItem = createElementWithClass('li', 'ingredients__item');\n    listItem.innerHTML = `\n      <input type=\"checkbox\" id=\"ingredient${index}\" name=\"ingredient${index}\">\n      <label for=\"ingredient${index}\">${indredient.original}</label>\n    `;\n\n    return listItem;\n  });\n\n  instructionsList.append(...ingredients);\n  return instructionsList;\n}\n\nfunction renderNutrients(nutrients: INutrient[]): string {\n  return `\n  <div class=\"nutrients recipe__nutrients\">\n    <div class=\"nutrients__item\">\n      <p>Calories</p>\n      <p class=\"nutrients__calories\">${round(nutrients[0].amount)}</p>\n    </div>\n    <div class=\"nutrients__item\">\n      <p>Protein</p>\n      <p class=\"nutrients__protein\">${round(nutrients[8].amount)}g</p>\n    </div>\n    <div class=\"nutrients__item\">\n      <p>Fat</p>\n      <p class=\"nutrients__fat\">${round(nutrients[1].amount)}g</p>\n    </div>\n  </div>\n  `;\n}\n\nfunction renderList(listItems: string[] | undefined, listItemClass: string): HTMLElement | null {\n  if (listItems === undefined) return null;\n\n  const list = document.createElement('div');\n\n  const categories = listItems.map(item => {\n    const listItem = createElementWithClass('li', listItemClass);\n    listItem.innerHTML = item;\n\n    return listItem;\n  });\n\n  list.append(...categories);\n  return list;\n}\n\nexport { renderRecipe, renderInstructions, renderList };\n","import { IUserResponse } from '../types';\nimport * as userService from '../api/userService';\nimport { ENDPOINTS } from '../config/api.config';\n\nfunction handleSaveFavoriteButtons(cardElement: Element, cardCategory: 'articles' | 'recipes') {\n  const saveButton = cardElement.querySelector('.save-btn') as HTMLButtonElement;\n  const favoriteButton = cardElement.querySelector('.favorite-btn') as HTMLButtonElement;\n\n  saveButton.addEventListener('click', (e: Event) => {\n    const targetButton = e.target as HTMLButtonElement;\n    targetButton.classList.toggle('is-active');\n    const userObject = JSON.parse(localStorage.getItem('user') || 'null');\n    if (userObject) updateUserResources(userObject, cardElement, targetButton, cardCategory, 'saved');\n  });\n\n  favoriteButton.addEventListener('click', (e: Event) => {\n    const targetButton = e.target as HTMLButtonElement;\n    targetButton.classList.toggle('is-active');\n    const userObject = JSON.parse(localStorage.getItem('user') || 'null');\n    if (userObject) updateUserResources(userObject, cardElement, targetButton, cardCategory, 'favorite');\n  });\n}\n\nfunction updateUserResources(\n  userObject: IUserResponse,\n  cardElement: Element,\n  eventTarget: HTMLButtonElement,\n  cardName: 'articles' | 'recipes',\n  cardCategory: 'saved' | 'favorite'\n) {\n  if (eventTarget.classList.contains('is-active')) {\n    userObject[cardName][cardCategory].push(cardElement.id);\n  } else {\n    userObject[cardName][cardCategory] = userObject[cardName][cardCategory].filter(\n      resourceId => resourceId !== cardElement.id\n    );\n  }\n  userService.sendUserData(userObject, ENDPOINTS.userUpdate);\n  localStorage.setItem('user', JSON.stringify(userObject));\n}\n\nexport { handleSaveFavoriteButtons, updateUserResources };\n","import getCookieValue from '../helpers/getCookieValue';\nimport { BASE_URL, ENDPOINTS } from '../config/api.config';\nimport { IUserResponse } from '../types';\n\nconst getUserData = async (): Promise<IUserResponse | undefined> => {\n  const tokenValue = getCookieValue('token');\n  const signupForm = document.querySelector('.popup') as HTMLElement;\n\n  if (tokenValue) {\n    const response = (await fetch(`${BASE_URL}${ENDPOINTS.userProfile}`, {\n      credentials: 'include',\n    })) as IUserResponse;\n    if (response.status === 200) {\n      return (await response.json()) as IUserResponse;\n    } else {\n      signupForm.classList.add('is-open');\n    }\n  } else {\n    signupForm.classList.add('is-open');\n  }\n};\n\nasync function sendUserData(data: IUserResponse, endpoint: string): Promise<Response> {\n  return (await fetch(`${BASE_URL}${endpoint}`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    credentials: 'include',\n    body: JSON.stringify(data),\n  })) as IUserResponse;\n}\n\nasync function logOut() {\n  const response = (await fetch(`${BASE_URL}${ENDPOINTS.userLogout}`, {\n    credentials: 'include',\n  })) as Response;\n  if (response.status === 204) {\n    localStorage.removeItem('userName');\n    window.open('./index.html', '_self');\n  }\n}\n\nexport { getUserData, sendUserData, logOut };\n","function getUserName() {\n  (document.querySelector('#user-name') as HTMLElement).textContent = window.localStorage.userName || 'User';\n}\n\nfunction setUserName(userName: string) {\n  window.localStorage.userName = userName;\n  (document.querySelector('#user-name') as HTMLElement).textContent = userName;\n}\n\nexport { getUserName, setUserName };\n","import getCookieValue from './getCookieValue';\nimport { BASE_URL, ENDPOINTS } from '../config/api.config';\nimport { IUserResponse } from '../types';\nimport { setUserName } from './manageUserName';\n\nfunction setLocalUser(response: IUserResponse) {\n  window.localStorage.setItem('user', JSON.stringify(response));\n}\n\nfunction addUserButtonListener() {\n  const userProfileButton = document.querySelector('.profile-btn') as HTMLButtonElement;\n  const signupForm = document.querySelector('.popup') as HTMLElement;\n\n  userProfileButton.addEventListener('click', async () => {\n    const tokenValue = getCookieValue('token');\n\n    if (tokenValue) {\n      const response = (await fetch(`${BASE_URL}${ENDPOINTS.userProfile}`, {\n        credentials: 'include',\n      })) as IUserResponse;\n      if (response.status === 200) {\n        const responseBody = (await response.json()) as IUserResponse;\n        setLocalUser(responseBody);\n        window.open('./user-page.html', '_self');\n      } else {\n        signupForm.classList.add('is-open');\n      }\n    } else {\n      signupForm.classList.add('is-open');\n    }\n  });\n}\n\nfunction addRegisterFormListener() {\n  const form = document.forms[1] as HTMLFormElement;\n  form.addEventListener('submit', handleRegistrationForm);\n}\n\nfunction addSignInFormListener() {\n  const form = document.forms[0] as HTMLFormElement;\n  form.addEventListener('submit', handleLoginForm);\n}\n\nasync function handleRegistrationForm(event: Event) {\n  event.preventDefault();\n  const formElement = event.target as HTMLFormElement;\n  const formData = serializeRegistrationForm(event.target as HTMLFormElement);\n\n  if (formData !== undefined) {\n    const response = await sendUserData(formData, ENDPOINTS.userRegister);\n    if (response.status === 400) {\n      (formElement.querySelector('#user-exist') as HTMLElement).classList.remove('hidden');\n    } else {\n      (document.querySelector('.popup') as HTMLElement).classList.remove('is-open');\n      alert('Registered successfully!');\n      formElement.reset();\n      const responseBody = (await response.json()) as IUserResponse;\n      setLocalUser(responseBody);\n      setUserName(responseBody.name);\n    }\n  }\n}\n\nasync function handleLoginForm(event: Event) {\n  event.preventDefault();\n  const formElement = event.target as HTMLFormElement;\n  const formData = serializeLoginForm(event.target as HTMLFormElement);\n\n  const response = await sendUserData(formData, ENDPOINTS.userLogin);\n  switch (response.status) {\n    case 401:\n      (formElement.querySelector('#wrong-password') as HTMLElement).classList.remove('hidden');\n      (formElement.querySelector('#user-not-found') as HTMLElement).classList.add('hidden');\n      break;\n    case 404:\n    case 500:\n      (formElement.querySelector('#user-not-found') as HTMLElement).classList.remove('hidden');\n      (formElement.querySelector('#wrong-password') as HTMLElement).classList.add('hidden');\n      break;\n    case 200: {\n      (document.querySelector('.popup') as HTMLElement).classList.remove('is-open');\n      alert('Logged in successfully!');\n      formElement.reset();\n      const responseBody = (await response.json()) as IUserResponse;\n      setLocalUser(responseBody);\n      setUserName(responseBody.name);\n    }\n  }\n}\n\nfunction serializeRegistrationForm(formNode: HTMLFormElement): FormData | undefined {\n  const password = formNode.password.value;\n  const passwordConfirm = formNode['password-confirm'].value;\n  if (password !== passwordConfirm) {\n    (formNode.querySelector('#password-mismatch') as HTMLElement).classList.remove('hidden');\n  } else {\n    (formNode.querySelector('#password-mismatch') as HTMLFormElement).classList.add('hidden');\n    (formNode.querySelector('#user-exist') as HTMLFormElement).classList.add('hidden');\n    return new FormData(formNode);\n  }\n}\n\nfunction serializeLoginForm(formNode: HTMLFormElement): FormData {\n  return new FormData(formNode);\n}\n\nasync function sendUserData(data: FormData, endpoint: string): Promise<IUserResponse> {\n  return (await fetch(`${BASE_URL}${endpoint}`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    credentials: 'include',\n    body: JSON.stringify(Object.fromEntries(data.entries())),\n  })) as IUserResponse;\n}\n\nexport { addUserButtonListener, addRegisterFormListener, addSignInFormListener };\n","import * as articlesService from '../../api/articlesService';\nimport * as recipesService from '../../api/recipesService';\nimport { renderArticle, renderRelevantRecipes } from './render';\nimport { handleSaveFavoriteButtons } from '../../features/cardButtonsHandler';\nimport * as formHandler from '../../helpers/loginFormHandlers';\n\nconst userObject = JSON.parse(localStorage.getItem('user') || 'null');\n\nasync function loadArticle(articleId: string) {\n  const articleData = await articlesService.getArticlesById(articleId);\n  renderArticle(articleData, userObject);\n  if (articleData.relevantRecipes.length > 0) {\n    const recipesData = await Promise.all(\n      articleData.relevantRecipes.map(async recipeId => await recipesService.getRecipeById(String(recipeId)))\n    );\n    renderRelevantRecipes(recipesData, userObject);\n  }\n}\nfunction addListeners() {\n  addArticleButtonsListeners();\n  addRecipeButtonsListeners();\n  formHandler.addUserButtonListener();\n  formHandler.addRegisterFormListener();\n  formHandler.addSignInFormListener();\n}\n\nfunction addArticleButtonsListeners() {\n  const articleButtonsContainer = document.querySelector('.article-container') as HTMLElement;\n  handleSaveFavoriteButtons(articleButtonsContainer, 'articles');\n}\n\nfunction addRecipeButtonsListeners() {\n  const recipes = document.querySelectorAll('.card');\n  recipes.forEach(recipe => {\n    handleSaveFavoriteButtons(recipe, 'recipes');\n  });\n}\n\nexport { loadArticle, addListeners };\n","function getCookieValue(cookieKey: string) {\n  return document.cookie\n    .split('; ')\n    .find(cookie => cookie.startsWith(`${cookieKey}=`))\n    ?.split('=')[1];\n}\n\nexport default getCookieValue;\n","import { burgerMenu } from '../../features/burgerMenu';\nimport * as Controller from './controller';\nimport '../../styles/main.scss';\nimport { getUserName } from '../../helpers/manageUserName';\n\nconst queryString = window.location.search;\nconst params = new URLSearchParams(queryString);\nconst articleId = params.get('id') as string;\n\nburgerMenu();\nController.loadArticle(articleId).then(() => Controller.addListeners());\ngetUserName();\n","import { BASE_URL, ENDPOINTS } from '../config/api.config';\nimport { IArticle, IArticleQueryOptions } from '../types';\n\nimport transformOptionsToQueryString from '../helpers/transformOptionsToQueryString';\n\nconst getArticles = async (queryOptions?: IArticleQueryOptions): Promise<IArticle[]> => {\n  let queryString = '';\n\n  if (queryOptions && Object.keys(queryOptions).length !== 0) {\n    queryString = transformOptionsToQueryString(queryOptions as IArticleQueryOptions);\n  }\n\n  const response = await fetch(`${BASE_URL}${ENDPOINTS.articles}/${queryString}`);\n\n  return ((await response.json()) as unknown) as IArticle[];\n};\n\nconst getArticlesById = async (articleId: string): Promise<IArticle> => {\n  const response = await fetch(`${BASE_URL}${ENDPOINTS.articles}/${articleId}`);\n\n  return ((await response.json()) as unknown) as IArticle;\n};\n\nexport { getArticles, getArticlesById };\n","import { IArticle, IRecipe, IUserResponse } from '../../types';\nimport createElementWithClass from '../../helpers/createElementWithClass';\nimport { renderRecipeCard } from '../../features/renderCards';\nimport { renderList } from '../recipe/render';\nimport checkItemInUserLists from '../../helpers/checkItemInUserLists';\n\nfunction renderArticle(articleData: IArticle, userObject: IUserResponse | null) {\n  const main = document.querySelector('#main') as HTMLElement;\n  const articleContainer = document.createElement('section');\n\n  const date = new Date(articleData.postedAt).toLocaleDateString('en-us', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n  });\n  const cardId = String(articleData._id);\n  const [isInSavedList, isInFavoritesList] = checkItemInUserLists(userObject, 'articles', cardId);\n  const articleCategoriesList = renderList(articleData.category, 'categories__item');\n  const paragraphsList = renderList(articleData.body, 'article__text');\n\n  articleContainer.innerHTML = `\n    <div class=\"container article-container\" id=${cardId}>\n      <div class=\"article__btns\">\n        <button class=\"article__btn_favorite btn_outlined btn-reset favorite-btn\">Add to favorite articles</button>\n        <button class=\"article__btn_save btn_outlined btn-reset save-btn\">Save for later</button>\n      </div>\n      <h1 class=\"article-main__title\">${articleData.title}</h1>\n      <img class=\"article-main__img\" src=${articleData.image} alt=\"article img\">\n      <div class=\"article__meta\">\n        <time class=\"article__date\" datetime=${articleData.postedAt}>${date}</time>\n        <ul class=\"article__categories list-reset\">\n          ${articleCategoriesList?.innerHTML}\n        </ul>\n      </div>\n      <div class=\"article__descr\">\n        ${paragraphsList?.innerHTML}\n      </div>\n    </div>\n  `;\n\n  if (isInSavedList) {\n    (articleContainer.querySelector('.save-btn') as HTMLButtonElement).classList.add('is-active');\n  }\n  if (isInFavoritesList) {\n    (articleContainer.querySelector('.favorite-btn') as HTMLButtonElement).classList.add('is-active');\n  }\n\n  main.appendChild(articleContainer);\n}\n\nfunction renderRelevantRecipes(recipesData: IRecipe[], userObject: IUserResponse | null) {\n  const main = document.querySelector('#main') as HTMLElement;\n  const recipesContainer = createElementWithClass('section', 'relevant-recipes');\n\n  recipesContainer.innerHTML = `\n    <div class=\"container\">\n      <h2 class=\"relevant-recipes__title\">Relevant recipes</h2>\n      <ul class=\"relevant-recipes__list list-reset\">\n      </ul>\n    </div>\n  `;\n\n  const recipesList = recipesContainer.querySelector('.relevant-recipes__list') as HTMLUListElement;\n\n  const recipesCards = recipesData.map(recipe =>\n    renderRecipeCard(recipe, 'normal', ['recipe__item'], 'li', userObject)\n  );\n\n  recipesList.append(...recipesCards);\n  main.appendChild(recipesContainer);\n}\n\nexport { renderArticle, renderRelevantRecipes };\n","import createElementWithClass from '../helpers/createElementWithClass';\nimport capitalize from '../helpers/capitalize';\nimport checkItemInUserLists from '../helpers/checkItemInUserLists';\nimport { IArticle, ILoadArticleCard, ILoadRecipeCard, IRecipe, IUserResponse } from '../types';\n\nfunction renderRecipeCard(\n  recipeData: IRecipe,\n  size: 'normal' | 'large',\n  classList: string[],\n  elemType: string,\n  userObject: IUserResponse | null\n): HTMLElement {\n  const dishType = capitalize(recipeData.dishTypes[0]) || '';\n  const calories = Math.round(recipeData.nutrition.nutrients[0].amount);\n  const cardId = String(recipeData.id);\n  const cardLink = `./recipe.html?id=${cardId}`;\n  const [isInSavedList, isInFavoritesList] = checkItemInUserLists(userObject, 'recipes', cardId);\n\n  const cardElementClassNames = size === 'normal' ? classList.concat('card') : classList.concat(['card', 'card_lg']);\n  const cardElement = createElementWithClass(elemType, ...cardElementClassNames) as HTMLLIElement;\n  cardElement.id = cardId;\n  cardElement.innerHTML = `\n    <div class=\"card__header\">\n      <p class=\"card__dish\">${dishType}</p>\n      <div class=\"recipe__btns\">\n        <button class=\"save-recipe btn-reset save-btn\"></button>\n        <button class=\"favorite-recipe btn-reset favorite-btn\"></button>\n      </div>\n    </div>\n    <a class=\"card__img\" href=\"${cardLink}\">\n      <img class=\"card__img\" src=${recipeData.image} alt=${recipeData.title}>\n    </a>\n    <a class=\"card-anchor\" href=${cardLink}>\n      <div class=\"card__meta\">\n        <div class=\"data__time\">\n          <p class=\"time__title\">Cook time</p>\n          <p class=\"time__info\">${recipeData.readyInMinutes} min</p>\n        </div>\n        <div class=\"data__calories\">\n          <p class=\"calories__title\">Calories</p>\n          <p class=\"calories__info\">${calories} kcal</p>\n        </div>\n        <div class=\"data__rating\">\n          <p class=\"rating__title\">Rating</p>\n          <p class=\"rating__info\">${recipeData.aggregateLikes}</p>\n        </div>\n      </div>\n      <div class=\"card__body\">\n        <h3 class=\"card__title\">${recipeData.title}</h3>\n        <p class=\"card__text\">${recipeData.summary}</p>\n      </div>\n    </a>\n  `;\n\n  if (isInSavedList) {\n    (cardElement.querySelector('.save-recipe') as HTMLButtonElement).classList.add('is-active');\n  }\n  if (isInFavoritesList) {\n    (cardElement.querySelector('.favorite-recipe') as HTMLButtonElement).classList.add('is-active');\n  }\n\n  return cardElement;\n}\n\nfunction renderArticleCard(\n  articleData: IArticle,\n  articleClass: string[],\n  userObject: IUserResponse | null\n): HTMLElement {\n  const date = new Date(articleData.postedAt).toLocaleDateString('en-us', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n  });\n  const cardId = String(articleData._id);\n  const articleLink = `./article.html?id=${cardId}`;\n  const [isInSavedList, isInFavoritesList] = checkItemInUserLists(userObject, 'articles', cardId);\n\n  const articleElement = createElementWithClass('article', ...articleClass) as HTMLElement;\n  articleElement.id = articleData._id;\n  articleElement.innerHTML = `\n    <img class=\"article__img\" src=${articleData.image} alt=\"article preview\">\n    <div class=\"article__content\">\n      <div class=\"article__header\">\n        <time class=\"article__date\" datetime=${articleData.postedAt}>${date}</time>\n        <div class=\"article__btns\">\n          <button class=\"save-article btn-reset save-btn\"></button>\n          <button class=\"favorite-article btn-reset favorite-btn\"></button>\n        </div>\n      </div>\n      <h3 class=\"article__title\">${articleData.title}</h3>\n      <p class=\"article__summary\">${articleData.summary}</p>\n      <a class=\"article__btn btn-reset\" href=${articleLink}>contunue reading</a>\n    </div>\n  `;\n\n  if (isInSavedList) {\n    (articleElement.querySelector('.save-article') as HTMLButtonElement).classList.add('is-active');\n  }\n  if (isInFavoritesList) {\n    (articleElement.querySelector('.favorite-article') as HTMLButtonElement).classList.add('is-active');\n  }\n\n  return articleElement;\n}\n\nfunction renderItems(\n  itemsData: IArticle[] | IRecipe[],\n  loadConfig: ILoadRecipeCard | ILoadArticleCard,\n  userObject: IUserResponse | null\n) {\n  return itemsData.map((item, itemIndex) => {\n    if ('largeCardIndex' in loadConfig) {\n      const size = itemIndex === loadConfig.largeCardIndex ? 'large' : 'normal';\n      return renderRecipeCard(item as IRecipe, size, loadConfig.cardClassList, loadConfig.listElemType, userObject);\n    }\n\n    return renderArticleCard(item as IArticle, loadConfig.articleClassList, userObject);\n  });\n}\n\nfunction renderCards(\n  itemsData: IArticle[] | IRecipe[],\n  loadConfig: ILoadRecipeCard | ILoadArticleCard,\n  userObject: IUserResponse | null\n) {\n  const sectionContainer = document.querySelector(`.${loadConfig.containerClass}`) as HTMLElement;\n  const sectionContainerList = sectionContainer.querySelector(`.${loadConfig.listClass}`) as HTMLUListElement;\n\n  const itemsCards = renderItems(itemsData, loadConfig, userObject);\n\n  sectionContainerList.innerHTML = '';\n  sectionContainerList.append(...itemsCards);\n}\n\nexport { renderRecipeCard, renderArticleCard, renderCards };\n","function capitalize(string: string) {\n  const words = string.split(' ');\n  const wordsCapitalized = words.map(word => word[0].toUpperCase() + word.slice(1));\n\n  return wordsCapitalized.join(' ');\n}\n\nexport default capitalize;\n","import { BASE_URL, ENDPOINTS } from '../config/api.config';\nimport { IRecipe, IRecipeQueryOptions } from '../types';\n\nimport transformOptionsToQueryString from '../helpers/transformOptionsToQueryString';\n\nconst getRecipes = async (queryOptions?: IRecipeQueryOptions): Promise<IRecipe[]> => {\n  let queryString = '';\n\n  if (queryOptions && Object.keys(queryOptions).length !== 0) {\n    queryString = transformOptionsToQueryString(queryOptions as IRecipeQueryOptions);\n  }\n\n  const response = await fetch(`${BASE_URL}${ENDPOINTS.recipes}/${queryString}`);\n\n  return ((await response.json()) as unknown) as IRecipe[];\n};\n\nconst getRecipeById = async (recipeId: string): Promise<IRecipe> => {\n  const response = await fetch(`${BASE_URL}${ENDPOINTS.recipes}/${recipeId}`);\n\n  return ((await response.json()) as unknown) as IRecipe;\n};\n\nconst getDistinctProps = async (recipePath: string): Promise<string[] | number[]> => {\n  const response = await fetch(`${BASE_URL}${ENDPOINTS.recipes}/distinct/${recipePath}`);\n\n  return ((await response.json()) as unknown) as string[] | number[];\n};\n\nexport { getRecipes, getRecipeById, getDistinctProps };\n"],"names":["burgerBtn","document","querySelector","menu","menuLinks","querySelectorAll","tagName","classNames","createdElement","createElement","classList","add","userObject","listName","itemId","saved","find","id","favorite","renderList","listItems","listItemClass","undefined","list","categories","map","item","listItem","innerHTML","append","handleSaveFavoriteButtons","cardElement","cardCategory","saveButton","favoriteButton","addEventListener","e","targetButton","target","toggle","JSON","parse","localStorage","getItem","updateUserResources","eventTarget","cardName","contains","push","filter","resourceId","async","data","endpoint","fetch","method","headers","credentials","body","stringify","setItem","setUserName","userName","window","textContent","setLocalUser","response","handleRegistrationForm","event","preventDefault","formElement","formData","formNode","password","value","FormData","remove","serializeRegistrationForm","status","alert","reset","responseBody","json","name","handleLoginForm","Object","fromEntries","entries","addListeners","forEach","recipe","userProfileButton","signupForm","cookieKey","cookie","split","startsWith","open","forms","queryString","location","search","articleId","URLSearchParams","get","el","articleData","main","articleContainer","date","Date","postedAt","toLocaleDateString","year","month","day","cardId","String","_id","isInSavedList","isInFavoritesList","articleCategoriesList","category","paragraphsList","title","image","appendChild","renderArticle","relevantRecipes","length","recipesData","recipesContainer","recipesList","recipesCards","recipeData","size","elemType","dishType","dishTypes","word","toUpperCase","slice","join","calories","Math","round","nutrition","nutrients","amount","cardLink","cardElementClassNames","concat","readyInMinutes","aggregateLikes","summary","renderRecipeCard","renderRelevantRecipes","Promise","all","recipeId","then"],"sourceRoot":""}